## C盘权限目录开启

net2-1  41分钟

## 修改C字体大小

net2-2  24分钟

# **第一讲、****VIVADO** **安装和** **ZYNQ** **系列芯片发展应用前景**

仿真文件路径存放位置：

![image-20231201103527026](H:/typora%E5%9B%BE%E7%89%87/image-20231201103527026.png)

# **第二讲、****Zynq** **开发知识储备和** **C** **语言基础**

芯片型号

![image-20231201111924942](H:/typora%E5%9B%BE%E7%89%87/image-20231201111924942.png)

![image-20231201153006967](H:/typora%E5%9B%BE%E7%89%87/image-20231201153006967.png)

 ![image-20231201153029300](H:/typora%E5%9B%BE%E7%89%87/image-20231201153029300.png)

![image-20231201153058653](H:/typora%E5%9B%BE%E7%89%87/image-20231201153058653.png)

![image-20231201153115145](H:/typora%E5%9B%BE%E7%89%87/image-20231201153115145.png)

 ![image-20231201153139091](H:/typora%E5%9B%BE%E7%89%87/image-20231201153139091.png)

不需要绑定管脚

![image-20231201154718271](H:/typora%E5%9B%BE%E7%89%87/image-20231201154718271.png)

![image-20231201154923398](H:/typora%E5%9B%BE%E7%89%87/image-20231201154923398.png)

![image-20231201154931713](H:/typora%E5%9B%BE%E7%89%87/image-20231201154931713.png)

生成所有IP所需要的文件

![image-20231201155042157](H:/typora%E5%9B%BE%E7%89%87/image-20231201155042157.png)

global：将block design 设计的文件都生成到工程中 

out of context per IP：按照每个IP的文件生成。在综合的时候按照每个IP生成一个网表。将网表综合到一块。

优点：在选择完成后，不需要点击```run synthesis```，就会综合网表。



![image-20231201155735162](H:/typora%E5%9B%BE%E7%89%87/image-20231201155735162.png)

综合和布局布线所占用的线程数量。



综合生成的网表

![image-20231201160234060](H:/typora%E5%9B%BE%E7%89%87/image-20231201160234060.png)

bit文件

![image-20231201160345123](H:/typora%E5%9B%BE%E7%89%87/image-20231201160345123.png)

接下来生成软件开发包的硬件表述文件

![image-20231201160750801](H:/typora%E5%9B%BE%E7%89%87/image-20231201160750801.png)

![image-20231201160823083](H:/typora%E5%9B%BE%E7%89%87/image-20231201160823083.png)

压缩包文件，描述硬件资源有哪些压缩包可以用。开发时如何调用官方给的驱动。

有了这个才可以创建软件开发的工程。

打开

![image-20231201161201122](H:/typora%E5%9B%BE%E7%89%87/image-20231201161201122.png)

```system.hdf```所有硬件的地址范围。

## 创建一个C语言的工程

![image-20231201170741032](H:/typora%E5%9B%BE%E7%89%87/image-20231201170741032.png)

选择hello world模板

![image-20231201170803882](H:/typora%E5%9B%BE%E7%89%87/image-20231201170803882.png)

查看打印信息

![image-20231201171006565](H:/typora%E5%9B%BE%E7%89%87/image-20231201171006565.png)

```.elf```是arm的可执行文件

### 连接板子

查看设备管理器的驱动

装x64的驱动

![image-20231201171400157](H:/typora%E5%9B%BE%E7%89%87/image-20231201171400157.png)

![image-20231201171448995](H:/typora%E5%9B%BE%E7%89%87/image-20231201171448995.png)

连接串口，点击+号

![image-20231201171546876](H:/typora%E5%9B%BE%E7%89%87/image-20231201171546876.png)

![image-20231201171624757](H:/typora%E5%9B%BE%E7%89%87/image-20231201171624757.png)

![image-20231201171647766](H:/typora%E5%9B%BE%E7%89%87/image-20231201171647766.png)

### 运行文件，单步调试

![image-20231201171730374](H:/typora%E5%9B%BE%E7%89%87/image-20231201171730374.png)

![image-20231201171757449](H:/typora%E5%9B%BE%E7%89%87/image-20231201171757449.png)

 最上边最右边

![image-20231201171832482](H:/typora%E5%9B%BE%E7%89%87/image-20231201171832482.png)

C/C++编辑模式，dubug模式。切换到编辑模式

下载fpga的配置。

![image-20231201171922290](H:/typora%E5%9B%BE%E7%89%87/image-20231201171922290.png)

###    program方法2：

![image-20231201172130710](H:/typora%E5%9B%BE%E7%89%87/image-20231201172130710.png)

![image-20231201172216750](H:/typora%E5%9B%BE%E7%89%87/image-20231201172216750.png)

CPU正常的话停在main函数的第一行。

program之后。

### 调试

![image-20231201172826439](H:/typora%E5%9B%BE%E7%89%87/image-20231201172826439.png)

step over：单步运行

step into：进到函数里面

step return：跳出函数。

![image-20231201172922154](H:/typora%E5%9B%BE%E7%89%87/image-20231201172922154.png)

resume：一直往下运行，直到到达断点。

在hello处设置断点，切换到

![image-20231201173110154](H:/typora%E5%9B%BE%E7%89%87/image-20231201173110154.png)

再往下执行一步，查看是否会出现结果。

![image-20231201173155797](H:/typora%E5%9B%BE%E7%89%87/image-20231201173155797.png)

### 不用sdk terminal的方法

点击×号

![image-20231201173242190](H:/typora%E5%9B%BE%E7%89%87/image-20231201173242190.png)

断开当前连接

![image-20231201173324945](H:/typora%E5%9B%BE%E7%89%87/image-20231201173324945.png)

打开串口调试助手，

再重新跑一遍，![image-20231201173701817](H:/typora%E5%9B%BE%E7%89%87/image-20231201173701817.png)

选择第一个调试方法

因为刚才已经配置过了，所以可以选择第一个。

![image-20231201173422169](H:/typora%E5%9B%BE%E7%89%87/image-20231201173422169.png)

![image-20231201173857777](H:/typora%E5%9B%BE%E7%89%87/image-20231201173857777.png)

## C语言基础

此时可以打开 SDK 进行软件开发，按照下图启动 SDK，launch sdk

![image-20231201200307404](H:/typora%E5%9B%BE%E7%89%87/image-20231201200307404.png)

![image-20231201200525591](H:/typora%E5%9B%BE%E7%89%87/image-20231201200525591.png)

![image-20231201200544139](H:/typora%E5%9B%BE%E7%89%87/image-20231201200544139.png)

![image-20231201200631501](H:/typora%E5%9B%BE%E7%89%87/image-20231201200631501.png)

![image-20231201200639645](H:/typora%E5%9B%BE%E7%89%87/image-20231201200639645.png)

###  int 类型

只要$<2^32=4,294,967,296$都可以用32位表示。

```c
ALT+?自动补全
每两个数代表一个字节，一个字节是8位。所以下面都是4字节，代表32位
int main()
{
    int * RegPtr;//指向地址的变量
    //给定值初始化
    RegPtr = (int *)0x1000000;//强制类型转换 
	//初始化地址中的数据
    * RegPtr=0x000000ff; 
}
```

点击保存，查看内存中的数据。

连接好板卡后

![image-20231201203208317](H:/typora%E5%9B%BE%E7%89%87/image-20231201203208317.png)

双击创建一个新的C程序

![image-20231201203401980](H:/typora%E5%9B%BE%E7%89%87/image-20231201203401980.png)

![image-20231201203421941](H:/typora%E5%9B%BE%E7%89%87/image-20231201203421941.png)

-> debug

->YES

查看地址是否填充了数据

![image-20231201203519701](H:/typora%E5%9B%BE%E7%89%87/image-20231201203519701.png)

运行程序，检测变化

![image-20231201203548668](H:/typora%E5%9B%BE%E7%89%87/image-20231201203548668.png)

### 作业：写char类型的。

地址还是32位，但是数据只能写8位。

### struct类型

#### 自动分配地址

```c
struct REGLIST{//结构体 结构体变量名称
    int index;
    char buffer[4]; 
}reg1; //REGLIST的名称
reg1.index=0x01;
reg1.buffer[0]=0x01;
reg1.buffer[1]=0x02;
reg1.buffer[2]=0x03;
reg1.buffer[3]=0x04;
```

上面也是一段内存，如何看数据？

![image-20231201210143390](H:/typora%E5%9B%BE%E7%89%87/image-20231201210143390.png)

右上角有变量信息

![image-20231201210528159](H:/typora%E5%9B%BE%E7%89%87/image-20231201210528159.png) 

查看第一个变量地址

![image-20231201210449746](H:/typora%E5%9B%BE%E7%89%87/image-20231201210449746.png)

添加地址 0x10c020

![image-20231201210554142](H:/typora%E5%9B%BE%E7%89%87/image-20231201210554142.png)

==index是int类型，占32位，4个字节==

==char类型占8位，一个字节，所以buffer占4-7这四个字节。==

![image-20231201210741386](H:/typora%E5%9B%BE%E7%89%87/image-20231201210741386.png)

#### 手动分配地址

```c
struct REGLIST (
	int index;
    char buffer[4];
);
struct REGLIST * RegPtr;//用结构体声明了一个指针
RegPtr=(struct REGLIST *) 0x100000;
// -> 访问内部成员变量
RegPtr->index=0x01;	
RegPtr->buffer[0]=0x02;
RegPtr->buffer[1]=0x03;
RegPtr->buffer[2]=0x04;
RegPtr->buffer[3]=0x05;
```

### sizeof

![image-20231201214619382](H:/typora%E5%9B%BE%E7%89%87/image-20231201214619382.png)

### 函数声明

程序自上而下执行，在main函数下面声明函数时，需要在main函数上面定义一下。

![image-20231201220312364](H:/typora%E5%9B%BE%E7%89%87/image-20231201220312364.png)

![image-20231201220524883](H:/typora%E5%9B%BE%E7%89%87/image-20231201220524883.png)

### SDK崩溃后无法运行C代码

打开后还是有错误

![image-20231201221721780](H:/typora%E5%9B%BE%E7%89%87/image-20231201221721780.png)

恢复工程

删掉下面的以及```SDK.log```

![image-20231201221054889](H:/typora%E5%9B%BE%E7%89%87/image-20231201221054889.png)

![image-20231201221322726](H:/typora%E5%9B%BE%E7%89%87/image-20231201221322726.png)

在窗口的文件里面找到这个工具

![image-20231201221938492](H:/typora%E5%9B%BE%E7%89%87/image-20231201221938492.png)

将工程设置到SDK里面

![image-20231201222033702](H:/typora%E5%9B%BE%E7%89%87/image-20231201222033702.png)

导入工程

![image-20231201222137468](H:/typora%E5%9B%BE%E7%89%87/image-20231201222137468.png)

![image-20231201222151982](H:/typora%E5%9B%BE%E7%89%87/image-20231201222151982.png)

导入刚刚SDK的目录

![image-20231201222231480](H:/typora%E5%9B%BE%E7%89%87/image-20231201222231480.png)

-> finish

![image-20231201222324686](H:/typora%E5%9B%BE%E7%89%87/image-20231201222324686.png)

不要忘记 打开串口